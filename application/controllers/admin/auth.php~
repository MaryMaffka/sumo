<?php

class Auth extends CI_Controller {

	function __construct()
	{
	   parent::__construct();
		$this->load->library('ion_auth'); 
	}

	function index() 
	{
		if(!$this->ion_auth->logged_in())
		{
			$this->load->view('admin/login');
		}
		else {
			$data['title'] = 'WELCOME';
			 $this->render_page('admin/render_page/welcome',array('title' => 'WELCOME'));
		}
	}

	function login()
	{
		if($this->ion_auth->login($_POST['username'],$_POST['password'],TRUE))
		{
		 $this->render_page('admin/render_page/welcome',array('title' => 'WELCOME'));
			redirect('admin', 'refresh');
		}
		else 
		{
			 show_error('Invalid username or password');
		    $this->load->view('admin/login');
		}
	}

		function render_page($view, $data=array())
		{
			$data['view'] = $view;
			$this->load->view('admin/render_page/index',array('data' => $data));
		}
}
?>